<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../static/img/dengue.png" type="image/png">
    <title>DengueAlerta | Inicio</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <style>
        body {
            font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            padding-bottom: 70px; 

        }
        .navbar {
            background-color: #00A9B0;
        }
        .navbar-brand, .nav-link {
            color: #fff !important;
        }
        .navbar-brand {
            font-size: 1.5rem;
        }

        .login-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        .login-container h2 {
            color: #00A9B0;
                }
        .btn-primary, .btn-success {
            background-color: #00A9B0;
            border-color: #00A9B0;
        }
        .btn-primary:hover {
            background-color: #00A9B0;
            border-color: #00A9B0;
        }
        .container {
    text-align: center; /* Centra la imagen horizontalmente dentro del contenedor */
    margin-top: 20px;
    }
    .nav-item {
        margin-right: 10px; /* Ajusta el valor según el espaciado que desees */
    }

    /* Selecciona la imagen específica por su clase */
    .logo {
        width: 150px; /* Ajusta el ancho de la imagen */
        height: 150px;
        border-radius:100%;
    }

    .inicio, .registro {
        margin-bottom: 25px;
    }
    .logo-container {
        text-align: center;
        margin-top: 20px;
    }
    .table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
    }

    .table th, .table td {
        padding: 12px;
        text-align: center;
    }

    .table th {
        background-color: #f2f2f2;
        font-weight: bold;
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #f9f9f9;
    }

    @media (max-width: 768px) {
        .table td, .table th {
            padding: 8px;
        }
    }

    </style>
</head>
<body>
    <header class="header">
        <nav class="navbar navbar-expand-md">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">DengueAlerta/San Carlos</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarToggler">
                    <ul class="navbar-nav ms-auto mb-2 mb-md-0 d-flex align-items-center">
                        <li class="nav-item">
                            <a class="nav-link" href="#">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a href="/registro" class="btn btn-danger ms-lg-3 mb-2 mb-md-0">Registrate</a>
                        </li>
                        <li class="nav-item">
                            <a href="/" class="btn btn-danger ms-lg-3">Cerrar Sesion</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    </div>
        <div class="logo-container">
            <img src="../static/img/dengue.png" alt="logo de pizza" class="logo">
        </div>
        
        <main>
            <!-- Botón para abrir el modal -->
            <div class="container my-4">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#mi-modal-2">
                    Agregar Caso
                </button>
            </div>
        
            <!-- Modal -->
            <div class="modal fade" id="mi-modal-2" tabindex="-1" aria-hidden="true" aria-labelledby="label-modal-2" data-bs-backdrop="static">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="label-modal-2">Agregar Caso</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                        </div>
                        <div class="modal-body">
                            <form action="/cargadecasos" method="POST">
                                <div class="mb-3">
                                    <label for="nombre" class="form-label">Nombre:</label>
                                    <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Ingrese el nombre" required>
                                </div>
                                <div class="mb-3">
                                    <label for="apellido" class="form-label">Apellido:</label>
                                    <input type="text" class="form-control" id="apellido" name="apellido" placeholder="Ingrese el apellido" required>
                                </div>
                                <div class="mb-3">
                                    <label for="telefono" class="form-label">Teléfono:</label>
                                    <input type="number" class="form-control" id="telefono" name="telefono" placeholder="Ingrese el teléfono" required>
                                </div>
                                <div class="mb-3">
                                    <label for="direccion" class="form-label">Dirección:</label>
                                    <input type="text" class="form-control" id="direccion" name="direccion" placeholder="Ingrese la dirección" required>
                                </div>
                                <div class="mb-3">
                                    <label for="barrio" class="form-label">Barrio:</label>
                                    <input type="text" class="form-control" id="barrio" name="barrio" placeholder="Ingrese el barrio" required>
                                </div>
                                <div class="mb-3">
                                    <label for="TipoDecaso" class="form-label">Seleccione el Tipo:</label>
                                    <select class="form-select" id="TipoDecaso" name="TipoDecaso" required>
                                        <option value="Caso A">Caso A</option>
                                        <option value="Caso B">Caso B</option>
                                        <option value="Caso C">Caso C</option>
                                    </select>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                                    <button type="submit" class="btn btn-success">Agregar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        
            <!-- Sección para mostrar los datos ingresados -->
            <section id="datos-ingresados" class="container my-4">
                <h2>Datos Ingresados</h2>
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="flash-messages">
                        {% for category, message in messages %}
                            {% if category == 'success' %}
                                <div class="alert alert-success">
                                    {{ message }}
                                </div>
                            {% elif category == 'error' %}
                                <div class="alert alert-danger">
                                    {{ message }}
                                </div>
                            {% else %}
                                <div class="alert alert-{{ category }}">
                                    {{ message }}
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            
            
            
<!-- inicio.html -->
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Teléfono</th>
                <th>Dirección</th>
                <th>Barrio</th>
                <th>Tipo de Caso</th>
                <th>Acciones</th> <!-- Agregué esta columna para los botones de editar y eliminar -->
            </tr>
        </thead>
        <tbody>
            {% for grupo in grupos %}
            <tr>
                <td>{{ grupo[1] }}</td>
                <td>{{ grupo[2] }}</td>
                <td>{{ grupo[3] }}</td>
                <td>{{ grupo[4] }}</td>
                <td>{{ grupo[5] }}</td>
                <td>{{ grupo[6] }}</td>
                <td>
                    <div class="d-flex justify-content-center">
                        <!-- Botón para abrir el modal de edición -->
                        <button class="btn btn-primary btn-sm me-2 mb-2 mb-sm-0" data-bs-toggle="modal" data-bs-target="#editarGrupo{{ grupo[0] }}">
                            Editar
                        </button>
                        <!-- Botón para eliminar -->
                        <button class="btn btn-danger btn-sm" onclick="eliminarGrupo('{{ grupo[0] }}')">
                            Eliminar
                        </button>
                    </div>
                </td>
            </tr>

            <!-- Modal de edición para cada grupo -->
            <div class="modal fade" id="editarGrupo{{ grupo[0] }}" tabindex="-1" aria-labelledby="editarGrupoLabel{{ grupo[0] }}" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editarGrupoLabel{{ grupo[0] }}">Editar Grupo</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form action="{{ url_for('editar_grupo', id=grupo[0]) }}" method="post">
                                <div class="mb-3">
                                    <label for="telefono{{ grupo[0] }}" class="form-label">Teléfono</label>
                                    <input type="text" class="form-control" id="telefono{{ grupo[0] }}" name="telefono" value="{{ grupo[3] }}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="nombre{{ grupo[0] }}" class="form-label">Nombre</label>
                                    <input type="text" class="form-control" id="nombre{{ grupo[0] }}" name="nombre" value="{{ grupo[1] }}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="apellido{{ grupo[0] }}" class="form-label">Apellido</label>
                                    <input type="text" class="form-control" id="apellido{{ grupo[0] }}" name="apellido" value="{{ grupo[2] }}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="barrio{{ grupo[0] }}" class="form-label">Barrio</label>
                                    <input type="text" class="form-control" id="barrio{{ grupo[0] }}" name="barrio" value="{{ grupo[5] }}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="direccion{{ grupo[0] }}" class="form-label">Dirección</label>
                                    <input type="text" class="form-control" id="direccion{{ grupo[0] }}" name="direccion" value="{{ grupo[4] }}" required>
                                </div>
                                <div class="mb-3">
                                    <label for="TipoDecaso{{ grupo[0] }}" class="form-label">Tipo de Caso</label>
                                    <select class="form-select" id="TipoDecaso{{ grupo[0] }}" name="TipoDecaso" required>
                                        <option value="Caso A" {% if grupo[6] == 'Caso A' %} selected {% endif %}>Caso A</option>
                                        <option value="Caso B" {% if grupo[6] == 'Caso B' %} selected {% endif %}>Caso B</option>
                                        <option value="Caso C" {% if grupo[6] == 'Caso C' %} selected {% endif %}>Caso C</option>
                                        <!-- Agrega más opciones según sea necesario -->
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </tbody>
    </table>
</div>

            </section>
            
            

        
            <!-- Mapa -->
            <section id="ubicacion" class="mt-5 text-center">
                <h2>San Carlos</h2>
                <div class="map-responsive">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d26532.35430428532!2d-69.06900198618196!3d-33.772440114898295!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x967c18e1bb73a703%3A0x3ccbe290ae7c2b54!2sSan%20Carlos%2C%20Mendoza!5e0!3m2!1ses-419!2sar!4v1718736624536!5m2!1ses-419!2sar" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" style="margin-bottom: 20px;"></iframe>
                </div>
            </section>
        </main>
        
        


        <footer class="footer bg-dark text-white text-center py-3 mt-5 fixed-bottom cona">
            <div>
                &copy; 2024 DengueAlerta. Todos los derechos reservados. Para más información, comunícate al <a href="tel:261234567">261234567</a>.
            </div>
        </footer>
    <script src="../static/js/bootstrap.bundle.min.js"></script>
    
    <!-- agregue este script para llamar a la ruta de eliminacion -->
    <script type="text/javascript">    
        function eliminarGrupo(grupoId) {
            window.location.href = "/delete/" + grupoId;
        }
    </script>

</body>